<!DOCTYPE html>
<html>
<head>
    <title>Clear Omnivox Session</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 50px; background: #f5f5f5; }
        .container { max-width: 600px; margin: 0 auto; background: white; padding: 40px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .btn { background: #007cba; color: white; padding: 15px 30px; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; margin: 10px 0; }
        .btn:hover { background: #005a87; }
        .status { margin: 20px 0; padding: 15px; border-radius: 5px; }
        .success { background: #d4edda; border: 1px solid #c3e6cb; color: #155724; }
        .info { background: #d1ecf1; border: 1px solid #bee5eb; color: #0c5460; }
        .warning { background: #fff3cd; border: 1px solid #ffeaa7; color: #856404; }
        h1 { color: #333; margin-bottom: 30px; }
        h2 { color: #007cba; margin-top: 30px; }
        .code { background: #f8f9fa; padding: 10px; border-radius: 3px; font-family: monospace; }
        ul { margin-left: 20px; }
        li { margin: 10px 0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîß Omnivox Session Reset Tool</h1>
        
        <div class="warning status">
            <strong>‚ö†Ô∏è Authentication Issue Detected</strong><br>
            Your session contains an expired JWT token that's preventing access to inbound numbers.
        </div>

        <h2>üóëÔ∏è Clear Session Data</h2>
        <p>Click the button below to clear all session cookies and localStorage:</p>
        <button class="btn" onclick="clearSession()">Clear All Session Data</button>
        
        <div id="clearStatus"></div>

        <h2>‚úÖ Next Steps</h2>
        <ol>
            <li><strong>After clicking "Clear All Session Data"</strong></li>
            <li><strong>Go to:</strong> <a href="http://localhost:3000/login" target="_blank">http://localhost:3000/login</a></li>
            <li><strong>Log in with:</strong>
                <div class="code">
                    Email: admin@omnivox-ai.com<br>
                    Password: [SET_VIA_ADMIN_PASSWORD_ENV_VAR]
                </div>
            </li>
            <li><strong>Navigate to:</strong> Admin ‚Üí Channels ‚Üí Inbound Numbers</li>
            <li><strong>You should see:</strong> Only your real Twilio number (+442046343130)</li>
        </ol>

        <h2>üîç What Was Fixed</h2>
        <div class="info status">
            ‚úÖ <strong>Database cleaned:</strong> Removed 3 test numbers<br>
            ‚úÖ <strong>Source code updated:</strong> No more placeholder data<br>
            ‚úÖ <strong>Only your real number remains:</strong> +442046343130 (UK Local - London)<br>
            ‚ùå <strong>Session issue:</strong> Expired token needs clearing
        </div>
    </div>

    <script>
        function clearSession() {
            // Clear all cookies
            document.cookie.split(";").forEach(function(c) { 
                document.cookie = c.replace(/^ +/, "").replace(/=.*/, "=;expires=" + new Date().toUTCString() + ";path=/"); 
            });
            
            // Clear localStorage
            localStorage.clear();
            
            // Clear sessionStorage  
            sessionStorage.clear();
            
            // Show success message
            document.getElementById('clearStatus').innerHTML = `
                <div class="success status">
                    ‚úÖ <strong>Session Cleared Successfully!</strong><br>
                    All cookies, localStorage, and sessionStorage have been cleared.<br>
                    <strong>Next:</strong> Go to <a href="http://localhost:3000/login" target="_blank">http://localhost:3000/login</a> and log in fresh.
                </div>
            `;
            
            console.log('üßπ Session cleared:');
            console.log('- All cookies cleared');
            console.log('- localStorage cleared'); 
            console.log('- sessionStorage cleared');
            console.log('‚úÖ Ready for fresh login at http://localhost:3000/login');
        }
    </script>
</body>
</html>