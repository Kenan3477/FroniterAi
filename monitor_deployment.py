#!/usr/bin/env python3
"""
Railway Deployment Monitor
Checks when the Full Frontier AI Evolution System comes online
"""

import requests
import time
import datetime

RAILWAY_URL = "https://web-production-3ef05.up.railway.app"

def check_deployment():
    """Check if deployment is live"""
    try:
        # Check health endpoint
        response = requests.get(f"{RAILWAY_URL}/health", timeout=10)
        if response.status_code == 200:
            health_data = response.json()
            print(f"‚úÖ DEPLOYMENT LIVE! Health check successful")
            print(f"üöÄ System: {health_data.get('system', 'Unknown')}")
            print(f"‚è±Ô∏è Uptime: {health_data.get('uptime', 0):.2f} seconds")
            print(f"ü§ñ Evolution Active: {health_data.get('evolution_active', False)}")
            return True
            
    except requests.exceptions.ConnectionError:
        print("‚è≥ Deployment still starting (Connection refused)")
        return False
    except requests.exceptions.Timeout:
        print("‚è≥ Deployment responding slowly (Timeout)")
        return False
    except Exception as e:
        print(f"‚ùå Error checking deployment: {e}")
        return False

def monitor_deployment():
    """Monitor deployment until it comes online"""
    print("üîç MONITORING RAILWAY DEPLOYMENT...")
    print(f"üì° URL: {RAILWAY_URL}")
    print(f"‚è∞ Started: {datetime.datetime.now().strftime('%H:%M:%S')}")
    print("-" * 50)
    
    attempt = 1
    while True:
        print(f"üîÑ Attempt {attempt}: ", end="")
        
        if check_deployment():
            print("\nüéâ FULL FRONTIER AI SYSTEM IS NOW LIVE!")
            print(f"üåê Dashboard: {RAILWAY_URL}")
            print(f"üíä Health: {RAILWAY_URL}/health")
            print(f"üìä API: {RAILWAY_URL}/api/system-status")
            break
        
        time.sleep(30)  # Wait 30 seconds between checks
        attempt += 1
        
        if attempt > 20:  # Stop after 10 minutes
            print("\n‚è∞ Timeout reached. Check Railway logs for issues.")
            break

if __name__ == "__main__":
    monitor_deployment()
