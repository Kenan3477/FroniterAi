#!/usr/bin/env python3
"""
REAL SYSTEM TEST - Verify FrontierAI actually works
"""

import sys
import os
sys.path.append('.')

def test_actual_implementor():
    """Test that the actual implementor creates real files"""
    print("üß™ Testing ActualTaskImplementor...")
    
    from actual_implementor import ActualTaskImplementor
    implementor = ActualTaskImplementor()
    
    # Test task implementation
    result = implementor.implement_task_for_real("TEST: Create a simple calculator function")
    
    print(f"Result: {result}")
    
    if result['success']:
        print(f"‚úÖ REAL FILE CREATED: {result['file_created']}")
        
        # Verify file exists
        if os.path.exists(result['file_created']):
            print(f"‚úÖ FILE VERIFIED: {result['file_created']} exists")
            
            # Show file content
            with open(result['file_created'], 'r') as f:
                content = f.read()
            print(f"üìÑ FILE CONTENT:\n{content[:200]}...")
            
            return True
        else:
            print(f"‚ùå FILE NOT FOUND: {result['file_created']}")
            return False
    else:
        print(f"‚ùå IMPLEMENTATION FAILED: {result.get('error', 'Unknown error')}")
        return False

def test_real_evolution_engine():
    """Test that the real evolution engine works"""
    print("\nüß™ Testing RealEvolutionEngine...")
    
    try:
        from real_evolution_engine import RealEvolutionEngine
        
        # Create engine instance
        engine = RealEvolutionEngine()
        
        # Test metrics
        metrics = engine.get_real_metrics()
        print(f"‚úÖ REAL METRICS: {metrics}")
        
        # Test GitHub monitoring
        github_status = engine.monitor_github_repo()
        print(f"‚úÖ GITHUB STATUS: {github_status['status']}")
        
        return True
        
    except Exception as e:
        print(f"‚ùå EVOLUTION ENGINE ERROR: {e}")
        return False

def test_main_system():
    """Test that the main system loads"""
    print("\nüß™ Testing Main System...")
    
    try:
        from frontier_ai_complete_system import app
        print("‚úÖ MAIN SYSTEM LOADED")
        
        # Test basic routes
        with app.test_client() as client:
            response = client.get('/health')
            if response.status_code == 200:
                print("‚úÖ HEALTH ENDPOINT WORKING")
                return True
            else:
                print(f"‚ùå HEALTH ENDPOINT FAILED: {response.status_code}")
                return False
                
    except Exception as e:
        print(f"‚ùå MAIN SYSTEM ERROR: {e}")
        return False

if __name__ == "__main__":
    print("üöÄ FRONTIERAI SYSTEM TEST - VERIFYING REAL FUNCTIONALITY")
    print("=" * 60)
    
    all_tests_passed = True
    
    # Run tests
    test1 = test_actual_implementor()
    test2 = test_real_evolution_engine()
    test3 = test_main_system()
    
    all_tests_passed = test1 and test2 and test3
    
    print("\n" + "=" * 60)
    if all_tests_passed:
        print("üéâ ALL TESTS PASSED - SYSTEM IS REAL AND WORKING!")
    else:
        print("üí• SOME TESTS FAILED - BULLSHIT DETECTED!")
    
    print("=" * 60)
